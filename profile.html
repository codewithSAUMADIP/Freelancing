<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Profile with Read More</title>
    <style>
        /* Styles remain unchanged */
        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }
        html {
            scroll-behavior: smooth;
        }
        .profile-container {
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            gap: 40px;
            margin-left: 0px;
        }
        .profile-name {
            display: flex;
            flex-direction: column;
            justify-content: center;
            gap: 15px;
        }
        .profile-img {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid #0078d7;
        }
        .profile-location {
            display: flex;
            flex-direction: row;
            gap: 30px;
        }
        @media (max-width: 769px) {
            .profile-container {
                flex-direction: column;
                gap: 20px;
                align-items: normal;
                margin-left: 30px;
            }
        }
        .about-section {
            width: 80%;
            margin-left: auto;
            margin-right: auto;
            margin-top: 30px;
        }
        .read-more-btn {
            color: #0078d7;
            cursor: pointer;
            font-weight: bold;
            text-decoration: underline;
            border: none;
            background: none;
            font-size: inherit;
        }
        @media (max-width:769px){
            .about-section{
                margin-left: 30px;
            }
        }
        .skills-section {
            width: 80%;
            margin-left: auto;
            margin-right: auto;
            margin-top: 30px;
        }
        .skills-section h4 {
            margin-bottom: 10px;
        }
        .skills-section .skill-btn {
            background-color: #0078d7;
            color: white;
            border: none;
            padding: 8px 12px;
            margin: 5px;
            border-radius: 5px;
            font-size: 14px;
            cursor: default;
        }













        .portfolio-container {
    width: 82%;
    margin-left: auto;
    margin-right: auto;
    background: #fff;
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 15px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.portfolio-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.portfolio-header h2 {
    font-size: 20px;
    margin: 0;
}

.portfolio-header .new-label {
    background: #ff4081;
    color: #fff;
    font-size: 12px;
    padding: 2px 6px;
    border-radius: 12px;
}

.portfolio-grid {
        display: flex;
        flex-direction: column;
        gap: 20px;
        margin-top:20px;
        margin-left: auto;
        margin-right: auto;
    }
@media (max-width:769px){
  .project-post{
    flex-direction: column;
  }
}
    .portfolio-post {
        display: flex;
        flex-direction: row;
        gap: 10px;
        width: 100%;
        border: 1px solid #ddd;
        padding: 5px;
        border-radius: 8px;
        background: #fff;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .portfolio-post img {
        width: 100%;
        height: auto;
        
        border-radius: 8px;
    }

    .portfolio-post h4,
    .portfolio-post p {
        margin: 0;
    }
#addProjectBtn{
  width: 100%;
  padding: 15px;
  cursor: pointer;
}

.portfolio-item {
    border: 1px dashed #ccc;
    border-radius: 8px;
    height: 150px;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    transition: 0.3s;
}

.portfolio-item:hover {
    background: #f0f0f0;
}

.portfolio-item input {
    display: none;
}

.portfolio-item img,
.portfolio-item video {
    max-width: 100%;
    max-height: 100%;
    border-radius: 8px;
}

.error {
    color: red;
    font-size: 12px;
    margin-top: 5px;
}

/* Popup styles */
.popup {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #fff;
    border: 1px solid #ddd;
    border-radius: 8px;
    width: 90%;
    max-width: 500px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    padding: 20px;
    z-index: 1000;
}

.popup h3 {
    margin-top: 0;
}

.popup label {
    display: block;
    margin: 10px 0 5px;
}

.popup input,
.popup textarea {
    width: 100%;
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 4px;
}

.popup .actions {
    margin-top: 20px;
    display: flex;
    justify-content: space-between;
}

.popup .actions button {
    padding: 8px 16px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

.popup .actions .cancel {
    background: #ddd;
}

.popup .actions .submit {
    background: #007bff;
    color: #fff;
}

.overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 999;
}
    </style>
</head>
<body>
    <div class="profile-container">
        <div>
            <img id="profile-img" class="profile-img" src="" alt="Profile Picture">
        </div>
        <div class="profile-name">
            <h2 id="profile-name"></h2>
            <p id="profile-tagline"></p>
            <div class="profile-location">
                <h4 id="profile-country"></h4>
                <h4 id="profile-language"></h4>
            </div>
        </div>
    </div>

    <div class="about-section">
        <h4>About me</h4>
        <p class="about-me" style="margin-top: 10px;">
            <span id="short-about"></span>
            <span id="extra-about" style="display: none;"></span>
            <button id="read-more-btn" class="read-more-btn">Read More</button>
        </p>
    </div>

    <div class="skills-section">
        <h4>Skills</h4>
        <div id="skills-container"></div>
    </div>












    <div class="portfolio-container">
        <div class="portfolio-header">
            <h2>Add your project</h2>
            <span class="new-label">NEW</span>
        </div>
        <button id="addProjectBtn">Add âž•</button>
        <div class="portfolio-grid" id="projectGrid">

        </div>
        <p id="error" class="error"></p>
    </div>

    <div class="overlay" id="overlay"></div>
    <div class="popup" id="popup">
        <h3>Add Project Details</h3>
        <form id="projectForm">
            <label for="projectTitle">Title...</label>
            <input type="text" id="projectTitle" placeholder="Enter project title">

            <label for="projectDescription">Describe your project min 200 words...</label>
            <textarea id="projectDescription" rows="4" placeholder="Enter project description"></textarea>

            <label for="projectPrice">Price(In Rupees)...</label>
            <input type="number" id="projectPrice" placeholder="Enter project price">

            <label for="projectDuration">Duration...</label>
            <input type="text" id="projectDuration" placeholder="Enter project duration">

            <label for="projectMedia">Add Media (Images/Videos, Max 1, Max size 25MB)</label>
            <input type="file" id="projectMedia" multiple accept="image/*,video/*">


            <p id="popupError" class="error"></p>

            <div class="actions">
                <button type="button" class="cancel" id="cancelPopup">Cancel</button>
                <button type="submit" class="submit">Submit</button>
            </div>
        </form>
    </div>

    <script>
        const userData = JSON.parse(localStorage.getItem("userData"));

        if (userData) {
            document.getElementById("profile-name").textContent = userData.name;
            document.getElementById("profile-img").src = userData.profilePic;
            document.getElementById("profile-country").textContent = userData.country;
            document.getElementById("profile-language").textContent = `ðŸ’¬ ${userData.language}`;
            document.getElementById("profile-tagline").textContent = userData.tagline;

            const aboutText = userData.about;
            const charLimit = 200;
            const shortAbout = document.getElementById("short-about");
            const extraAbout = document.getElementById("extra-about");
            const readMoreBtn = document.getElementById("read-more-btn");

            if (aboutText.length > charLimit) {
                shortAbout.textContent = aboutText.slice(0, charLimit);
                extraAbout.textContent = aboutText.slice(charLimit);
            } else {
                shortAbout.textContent = aboutText;
                readMoreBtn.style.display = "none";
            }

            readMoreBtn.addEventListener("click", () => {
                if (extraAbout.style.display === "none") {
                    extraAbout.style.display = "inline";
                    readMoreBtn.textContent = "Read Less";
                } else {
                    extraAbout.style.display = "none";
                    readMoreBtn.textContent = "Read More";
                }
            });

            const skillsContainer = document.getElementById("skills-container");
            userData.skills.forEach(skill => {
                const skillBtn = document.createElement("button");
                skillBtn.className = "skill-btn";
                skillBtn.textContent = skill;
                skillsContainer.appendChild(skillBtn);
            });
        } else {
            alert("No profile data found. Please fill out the form first.");
            window.location.href = "profile.html";
        }
















        const projectButton = document.getElementById('addProjectBtn');
        const popup = document.getElementById('popup');
        const overlay = document.getElementById('overlay');
        const cancelPopup = document.getElementById('cancelPopup');
        const projectForm = document.getElementById('projectForm');
        const projectGrid = document.getElementById('projectGrid');
        const errorPopup = document.getElementById('popupError');
        const maxFileSize = 25 * 1024 * 1024; // 25MB
        let uploadedMedia = [];
        // Show popup
        projectButton.addEventListener('click', () => {
            popup.style.display = 'block';
            overlay.style.display = 'block';
        });

        // Hide popup
        cancelPopup.addEventListener('click', () => {
            closePopup();
        });

        //close popup
        function closePopup() {
            popup.style.display = 'none';
            overlay.style.display = 'none';
            projectForm.reset();
            errorPopup.textContent = '';
            uploadedMedia = [];
        }
        overlay.addEventListener('click', () => {
            closePopup();
        });


// Handle file input
    document.getElementById('projectMedia').addEventListener('change', (event) => {
    const files = event.target.files;
    errorPopup.textContent = '';

    if (files.length > 2) {
        errorPopup.textContent = 'You can upload a maximum of 2 media files.';
        return;
    }
    uploadedMedia = [];

    for (const file of files) {
        if (file.size > maxFileSize) {
            errorPopup.textContent = `File ${file.name} exceeds the size limit of 25MB.`;
            return;
        }

        const fileType = file.type.split('/')[0];
        if (fileType === 'image' || fileType === 'video') {
            const fileURL = URL.createObjectURL(file);
            uploadedMedia.push({ type: fileType, url: fileURL });
        } else {
            errorPopup.textContent = 'Only images and videos are allowed.';
            return;
        }
    }
    });

// Handle form submission
    projectForm.addEventListener('submit', (event) => {
    event.preventDefault();

    const title = document.getElementById('projectTitle').value;
    const description = document.getElementById('projectDescription').value;
    const price = document.getElementById('projectPrice').value;
    const duration = document.getElementById('projectDuration').value;

    if (!title || !description || !price || !duration) {
        errorPopup.textContent = 'All fields are required.';
        return;
    }

    if (uploadedMedia.length === 0) {
        errorPopup.textContent = 'Please upload at least one media file.';
        return;
    }

    // Create the project item
    const projectItem = document.createElement('div');
    projectItem.classList.add('portfolio-post');

    let mediaHTML = '';
    uploadedMedia.forEach((media) => {
        if (media.type === 'image') {
            mediaHTML += `<img style="width: 100%; height: auto; border-radius: 8px;" src="${media.url}" alt="Image">`;
        } else if (media.type === 'video') {
            mediaHTML += `<video style="width: 100%; height: auto; border-radius: 8px;max-height: 500px;" controls>
                            <source src="${media.url}" type="video/mp4">
                          Your browser does not support the video tag.
                          </video>`;
        }
    });

    projectItem.innerHTML = `
        <div>
            <div class="project-post" style="width: 100%; display: flex; gap: 20px; justify-content: center; align-items: center;">
                <div style="width: 50%; min-width: 50%;">
                    ${mediaHTML}
                </div>
                <div>
                    <div style="display: flex; flex-direction: column; gap: 30px;">
                        <h4>${title}</h4>
                        <p>${description}</p>
                        <div style="display: flex; flex-direction: row; gap: 10px;">
                            <p><strong>Price:</strong> $${price}</p>
                            <p><strong>Duration:</strong> ${duration}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `;

    projectGrid.appendChild(projectItem);
    closePopup();
});
    </script>
</body>
</html>
